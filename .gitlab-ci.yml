# This file is generated by GitLab CI
Windows:
  script:
  - hostname
  - /c/CB/slowrunner.exe -v -2 -e "D:\CB\NiftyLinkContinuousBuild.bat"
  tags:
  - windows
  except:
  - tags
Mac:
  script:
  - 'echo -n "hostname: "'
  - hostname
  - ''
  - cd ..
  - if [ -d NiftyLink-SuperBuild ]; then
  - rm -rf NiftyLink-SuperBuild
  - fi
  - mkdir -p NiftyLink-SuperBuild
  - cd NiftyLink-SuperBuild
  - echo Configuring external projects...
  - cmake ../NiftyLink -DCMAKE_BUILD_TYPE=Debug -DBUILD_TESTING=ON -DSUPERBUILD_EXCLUDE_NIFTYLINKBUILD_TARGET:BOOL=ON
  - echo Building external projects...
  - make -j4
  - echo Configuring NiftyLink project...
  - cmake -DSUPERBUILD_EXCLUDE_NIFTYLINKBUILD_TARGET:BOOL=OFF .
  - echo Building NiftyLink project...
  - "# Note:"
  - "# The 'true' command prevents this job script aborting in case the build fails."
  - "# We want to see the build errors on CDash."
  - make -j4 || true
  - cd NiftyLink-build
  - ctest -S CTestContinuous.cmake -V
  tags:
  - mac
  except:
  - tags
Linux:
  script:
  - 'echo -n "hostname: "'
  - hostname
  - ''
  - cd ..
  - if [ -d NiftyLink-SuperBuild ]; then
  - rm -rf NiftyLink-SuperBuild
  - fi
  - mkdir -p NiftyLink-SuperBuild
  - cd NiftyLink-SuperBuild
  - cmake ../NiftyLink -DCMAKE_BUILD_TYPE=Debug -DBUILD_TESTING=ON -DNIFTYLINK_USE_KWSTYLE:BOOL=ON
    -DNIFTYLINK_USE_CPPCHECK:BOOL=ON-DSUPERBUILD_EXCLUDE_NIFTYLINKBUILD_TARGET:BOOL=ON
  - echo Building external projects...
  - make -j4
  - echo Configuring NiftyLink project...
  - cmake -DSUPERBUILD_EXCLUDE_NIFTYLINKBUILD_TARGET:BOOL=OFF .
  - echo Building NiftyLink project...
  - "# Note:"
  - "# The 'true' command prevents this job script aborting in case the build fails."
  - "# We want to see the build errors on CDash."
  - make -j4 || true
  - cd NiftyLink-build
  - ctest -S CTestContinuous.cmake -V
  tags:
  - linux
  except:
  - tags
